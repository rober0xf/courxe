<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cloudinary-video-player@3.0.2/dist/cld-video-player.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdn.jsdelivr.net/npm/cloudinary-video-player@3.0.2/dist/cld-video-player.min.js"
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script defer>
    function renderVideoElement(videoPlayerElement) {
        // creates a random video id
        const videoPlayerId = "video-id" + Math.random().toString(36).substr(2, 9)
        videoPlayerElement.setAttribute("id", videoPlayerId)
        const cloudName = videoPlayerElement.dataset.cloudName
        const videoUrl = videoPlayerElement.dataset.videoUrl
        if (cloudName && videoUrl) {
            const cld = cloudinary.videoPlayer(videoPlayerId, {
                cloudName: cloudName
            })
            cld.source(videoUrl)
        }
    }

    function renderAllVideos(params) {
        const videoPlayerClassName = "videos"
        const videoPlayerElements = document.getElementsByClassName(videoPlayerClassName)
        for (let video of videoPlayerElements) {
            renderVideoElement(video)
        }
    }
    document.addEventListener("DOMContentLoaded", renderAllVideos)
</script>